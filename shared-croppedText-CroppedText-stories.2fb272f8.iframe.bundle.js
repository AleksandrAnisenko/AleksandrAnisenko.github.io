/*! For license information please see shared-croppedText-CroppedText-stories.2fb272f8.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_start_template=self.webpackChunkreact_start_template||[]).push([[210],{"./src/shared/croppedText/CroppedText.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CroppedText_stories});var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var calcMiddle=function calcMiddle(start,end){return Math.floor((start+end)/2)},getTestText=function getTestText(text,indexTo){return text.slice(0,indexTo).trimEnd()+"Рђд"},CroppedText=(0,react.memo)((function(_ref){var rows=_ref.rows,opened=_ref.opened,children=_ref.children,className=_ref.className,_useState2=_slicedToArray((0,react.useState)("ле"),2),croppedText=_useState2[0],setCroppedText=_useState2[1],lineHeight=(0,react.useRef)(0),elem=(0,react.useRef)(null),start=(0,react.useRef)(0),end=(0,react.useRef)(children.length),middle=(0,react.useRef)(calcMiddle(start.current,end.current)),reset=(0,react.useCallback)((function(){start.current=0,end.current=children.length,middle.current=calcMiddle(start.current,end.current),setCroppedText(getTestText(children,middle.current))}),[children]);return(0,react.useLayoutEffect)((function(){elem.current&&(lineHeight.current=elem.current.getBoundingClientRect().height)}),[]),(0,react.useEffect)((function(){reset()}),[reset,rows,children,opened]),(0,react.useLayoutEffect)((function(){if(elem.current&&children&&!(end.current<start.current)&&"ле"!==croppedText){if(elem.current.getBoundingClientRect().height<=lineHeight.current*rows)return children.trimEnd().length===middle.current?(setCroppedText(children),void(end.current=-1)):(start.current=middle.current+1,middle.current=calcMiddle(start.current,end.current),void setCroppedText(getTestText(children,middle.current)));end.current=middle.current-1,middle.current=calcMiddle(start.current,end.current),setCroppedText(getTestText(children,middle.current))}}),[croppedText,opened]),(0,react.useLayoutEffect)((function(){var currElem=elem.current;if(currElem){var resizeObserver=new ResizeObserver((function(entries){entries.forEach((function(){reset()}))}));return resizeObserver.observe(currElem),function(){currElem&&resizeObserver.unobserve(currElem),reset()}}}),[reset]),children?(0,jsx_runtime.jsx)("div",{className,ref:elem,children:opened?children:croppedText}):null}));CroppedText.displayName="CroppedText";try{CroppedText.displayName="CroppedText",CroppedText.__docgenInfo={description:"",displayName:"CroppedText",props:{rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/shared/croppedText/CroppedText.tsx#CroppedText"]={docgenInfo:CroppedText.__docgenInfo,name:"CroppedText",path:"src/shared/croppedText/CroppedText.tsx#CroppedText"})}catch(__react_docgen_typescript_loader_error){}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const CroppedText_stories={title:"shared/CroppedText",component:CroppedText,args:{rows:4,opened:!1,children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. A culpa doloribus illo libero maxime       non quia velit voluptate. Accusamus ad commodi deserunt doloribus dolorum ea enim esse eveniet       expedita illo, laboriosam maiores minima nemo odit, perferendis praesentium quasi quia       recusandae repellat sint, sit vitae voluptate. Aliquam, corporis delectus eveniet facere       fugiat illo illum impedit incidunt ipsam iste iure, iusto modi nesciunt nobis nostrum nulla       obcaecati odit pariatur provident rem repellat repellendus rerum sequi sunt tempore veritatis       voluptate? Asperiores assumenda dolor est hic natus possimus quaerat quas quidem sed       veritatis? Consequatur ea illum incidunt inventore modi odio rem sunt ut voluptates!"}};var Template=function Template(args){return(0,jsx_runtime.jsx)("div",{style:{maxWidth:700},children:(0,jsx_runtime.jsx)(CroppedText,_objectSpread({},args))})};Template.displayName="Template";var Default=Template.bind({});Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <div style={{\n  maxWidth: 700\n}}>\n    <CroppedText {...args} />\n  </div>",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);